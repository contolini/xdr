(function(){var e=function(e,t,n){var r=document.createElement(e);for(var i in t)r.setAttribute(i,t[i]);return n&&r.appendChild(document.createTextNode(n)),r},t=function(){var e=0,t=!1,n,r;return n={5.5:5.5,5.6:6,5.7:7,5.8:8,9:9,10:10},r=(new Function("/*@cc_on return @_jscript_version; @*/"))(),r!==undefined&&(t=!0,e=n[r]),{version:e,browser:t}}(),n=function(e){var t={},n,r,i,s;e=e||"",e=e.replace("\r",""),e=e.split("\n");for(n=0;n<e.length;n++)r=e[n].indexOf(":"),i=e[n].substr(0,r),s=e[n].substr(r+1),i&&s&&(i=i.replace(/^\s+/,"").replace(/\s+$/,""),s=s.replace(/^\s+/,"").replace(/\s+$/,""),t[i.toLowerCase()]=s);return t},r=function(e,t){if(!t||typeof t!="object")return e;var n=new String(e),r=[];for(var i in t)r.push(encodeURIComponent(i)+"="+encodeURIComponent(t[i]));var s=r.join("&");return n+=n.indexOf("?")==-1?"?":"&",n+=s,n},i={text:{mime:"text/plain",encode:function(e){return e},decode:function(e){return e}},json:{mime:"application/json",encode:function(e){return JSON.stringify(e)},decode:function(e){return JSON.parse(e)}}},s=function(e,t){var n=e;if(i[t]){var r=i[t].decode;n=r(n)}return n},o=!("XDomainRequest"in window)||t.browser&&t.version==10,u=function(){return o?window.XMLHttpRequest?new XMLHttpRequest:null:new XDomainRequest},a=function(e,t){var n=e.data;typeof n[t.status]=="number"&&(e.status=n[t.status]);if(typeof n[t.error]=="object"){var r=""+e.status;/^2/.test(r)||n[t.error].message&&(e.error=new Error(""+n[t.error].message))}},f=function(e,t){this.url=e,this.options=t};f.counter=-1,f.prototype.send=function(t){var n=this,r="__jsonp__"+ ++f.counter;this.url+=this.url.indexOf("?")==-1?"?":"&",this.url+=encodeURIComponent(this.options.jsonp)+"="+encodeURIComponent(r);var i=e("script",{src:this.url});window[r]=function(e){if(typeof n.options.callback=="function"){var t={status:200,xhr:n,headers:null,error:null};t.data=e,a(t,n.options),n.options.callback(t)}};var s=document.getElementsByTagName("head")[0]||document.documentElement,o=!1,u=function(){window[r]=null;try{delete window[r]}catch(e){}s&&i.parentNode&&s.removeChild(i)};i.onload=i.onreadystatechange=function(){!o&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")&&(o=!0,i.onload=i.onreadystatechange=null,u())},s.insertBefore(i,s.firstChild)},f.prototype.abort=function(){};var l=function(e,c){var h,p,d=!1,v;if(typeof e=="object"&&"JSON"in window){var m=e.type||"text";m=="jsonp"&&(d=!0,m="json",e.jsonp=e.jsonp||l.defaults.jsonp);if(m in i){if(!!d||!(t.browser&&t.version<8)&&("XMLHttpRequest"in window||"XDomainRequest"in window)){typeof c=="function"&&(e.callback=c);if(e.data){var g=i[m].encode;v=g(e.data)}e.error=e.error||l.defaults.error,e.status=e.status||l.defaults.status,v&&(d||typeof e.parameter=="string")&&(e.params=e.params||{},e.params[e.parameter||l.defaults.parameter]=v);var y=r(e.url||"",e.params),b=e.method||l.defaults.method,w=e.headers||{},E=typeof e.async=="boolean"?e.async:l.defaults.async;e.credentials=e.credentials||{};var S=function(t){typeof e.callback=="function"&&(a(t,e),e.callback(t))};if(d)h=new f(y,e),h.send(v),y=h.url;else{h=u();if(!o)h.open(b,y),h.onload=function(){var e={status:this.status||200,xhr:this,headers:null,error:null};e.data=s(this.responseText,m),S(e)},h.onerror=function(){var e={status:this.status||500,xhr:this,headers:null,error:null};e.error=new Error("XDomainRequest error"),S(e)},h.ontimeout=h.onprogress=function(){};else{if(e.fields)for(p in e.fields)h[p]=e.fields[p];h.open(b,y,E,e.credentials.username,e.credentials.password),e.mime&&typeof h.overrideMimeType=="function"&&h.overrideMimeType(e.mime);for(p in l.defaults.headers)h.setRequestHeader(p,l.defaults.headers[p]);for(p in w)h.setRequestHeader(p,w[p]);h.onreadystatechange=function(){if(this.readyState==4){var e=""+(this.status||0),t={status:this.status,xhr:this,error:null};/^2/.test(e)||(t.error=new Error("XMLHttpRequest error "+e)),t.headers=n(this.getAllResponseHeaders()),t.data=s(this.responseText,m),S(t)}}}h.timeout=e.timeout||l.defaults.timeout,o?h.send(v):setTimeout(function(){h.send(v)},e.delay||l.defaults.delay)}return{xhr:h,abort:h.abort,cors:o,ie:t,url:y,jsonp:d}}return!1}return!1}return!1};l.ie=t,l.jsonp=f,l.converters=i,l.defaults={method:"GET",timeout:1e4,delay:0,async:!0,parameter:"packet",jsonp:"callback",error:"error",status:"code",headers:{"X-Requested-With":"XMLHttpRequest"}},typeof module=="object"&&typeof module.exports=="object"?module.exports=l:typeof define=="function"&&define.amd?define("ajax",["require"],function(e){return l}):window&&(window.ajax=l)})();