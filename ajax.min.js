(function(){if(!window.DOMParser&&window.ActiveXObject){var e=function(){};e.prototype.baseURI=null,e.prototype.parseFromString=function(e,t){var n=new ActiveXObject("Microsoft.XMLDOM");return n.async=!0,n.validateOnParse=!1,n.loadXML(e),n},window.DOMParser=e}var t=function(){var e=0,t=!1,n,r;return n={5.5:5.5,5.6:6,5.7:7,5.8:8,9:9,10:10},r=(new Function("/*@cc_on return @_jscript_version; @*/"))(),r!==undefined&&(t=!0,e=n[r]),{version:e,browser:t}}(),n=function(e){var t={},n,r,i,s;e=e||"",e=e.replace("\r",""),e=e.split("\n");for(n=0;n<e.length;n++)r=e[n].indexOf(":"),i=e[n].substr(0,r),s=e[n].substr(r+1),i&&s&&(i=i.replace(/^\s+/,"").replace(/\s+$/,""),s=s.replace(/^\s+/,"").replace(/\s+$/,""),t[i.toLowerCase()]=s);return t},r=function(e,t){if(!t||typeof t!="object")return e;var n=e,r=[];for(var i in t)r.push(encodeURIComponent(i)+"="+encodeURIComponent(t[i]));var s=r.join("&");return n+=n.indexOf("?")==-1?"?":"&",n+=s,n},i={text:{mime:"text/plain",encode:function(e){return e},decode:function(e){return e}},json:{mime:"application/json",encode:function(e){return JSON.stringify(e)},decode:function(e){return JSON.parse(e)}},xml:{mime:"text/xml",encode:function(e){return e},decode:function(e){var t=new DOMParser;return t.parseFromString(e,"application/xml")}}},s=function(e,t,n){return e},o=!("XDomainRequest"in window)||t.browser&&t.version==10,u=function(){return o?window.XMLHttpRequest?new XMLHttpRequest:null:new XDomainRequest},a=function(e){var f,l,c=r(e.url||"",e.params),h=e.method||a.defaults.method,p=e.headers||{},d=typeof e.async=="boolean"?e.async:a.defaults.async;e.credentials=e.credentials||{};var v=e.type||"text";if(v in i){var m=i[v].mime;if(t.browser&&t.version<8)return!1;var g=function(t){var n=""+(t.status||0);/^2/.test(n)?typeof e.success=="function"&&e.success(t,t.xhr):typeof e.error=="function"&&e.error(t,t.xhr)};f=u();if(!f)return!1;if(!o)f.open(h,c),f.onload=function(){var e={status:this.status||200,xhr:this,headers:null};e.data=s(this.responseText,v,m),g(e)},f.onerror=function(){var e={status:this.status||500,xhr:this,headers:null};g(e)},f.ontimeout=f.onprogress=function(){};else{if(e.fields)for(l in e.fields)f[l]=e.fields[l];f.open(h,c,d,e.credentials.username,e.credentials.password);for(l in a.defaults.headers)f.setRequestHeader(l,a.defaults.headers[l]);for(l in p)f.setRequestHeader(l,p[l]);f.onreadystatechange=function(){if(this.readyState==4){var e={status:this.status,xhr:this};e.headers=n(this.getAllResponseHeaders()),e.data=s(this.responseText,v,m),g(e)}}}return f.timeout=e.timeout||a.defaults.timeout,t?setTimeout(function(){f.send(e.data)},e.delay||a.defaults.delay):f.send(e.data),{xhr:f,abort:f.abort,core:o,ie:t,url:c}}return!1};a.ie=t,a.converters=i,a.defaults={method:"GET",timeout:1e4,delay:0,async:!0,headers:{"X-Requested-With":"XMLHttpRequest"}},typeof module=="object"&&typeof module.exports=="object"?module.exports=a:typeof define=="function"&&define.amd?define("ajax",[],function(){return a}):window&&(window.ajax=a)})();